let localResult = {
  totalArticles: 1276388,
  articles: [
    {
      title: "Marshalls kraftigaste bärbara högtalare",
      description:
        "Marshall Middleton Bluetooth-högtalare har fyra högtalarelement för att ge ett kraftfullare och större ljud.",
      content:
        "Marshall Middleton är den mest kraftfulla bärbara Bluetooth-högtalaren från företaget, för människor som inte är nöjda med en liten högtalare med lågt och tunt ljud. Den har allt som en vanlig bärbar högtalare har, till exempel en handlovsrem och lån... [1719 chars]",
      url: "https://www.ljudochbild.se/nyheter/hogtalare/marshalls-kraftigaste-barbara-hogtalare/",
      image:
        "https://www.ljudochbild.se/wp-content/uploads/2023/02/Marshall-Middleton-lifestyle-SPREAD-989x556-1.jpg",
      publishedAt: "2023-02-01T10:05:05Z",
      source: {
        name: "Ljud & Bild",
        url: "https://www.ljudochbild.se",
      },
    },
    {
      title:
        "Tate Modern viewing platform invades privacy of flats, supreme court rules",
      description:
        "Court finds owners of apartments opposite London gallery face unacceptable level of intrusion",
      content:
        "The owners of luxury flats opposite the Tate Modern’s viewing gallery face an unacceptable level of intrusion that prevents them enjoying their homes, the supreme court has ruled.\nIn a majority judgment, the court determined that the flat owners face... [4272 chars]",
      url: "https://www.theguardian.com/artanddesign/2023/feb/01/tate-modern-viewing-platform-invades-privacy-of-flats-supreme-court-rules",
      image:
        "https://i.guim.co.uk/img/media/39e191a9f5ccb1ad4fe3be18cb57f764b8deb057/0_25_3500_2101/master/3500.jpg?width=1200&height=630&quality=85&auto=format&fit=crop&overlay-align=bottom%2Cleft&overlay-width=100p&overlay-base64=L2ltZy9zdGF0aWMvb3ZlcmxheXMvdGctZGVmYXVsdC5wbmc&enable=upscale&s=f31542dca2f8b346a115d6a7aeaa0126",
      publishedAt: "2023-02-01T10:04:00Z",
      source: {
        name: "The Guardian",
        url: "https://www.theguardian.com",
      },
    },
    {
      title:
        "Gatchalian’s appointment as DSWD chief welcomed by Tulfo, House reps",
      description:
        "The appointment of Valenzuela City Representative Rex Gatchalian as the new chief of the Department of Social Welfare and Development (DSWD) was met with more positive responses on Wednesday, including from erstwhile secretary, Erwin Tulfo.",
      content:
        "MANILA, Philippines — The appointment of Valenzuela City Representative Rex Gatchalian as the new chief of the Department of Social Welfare and Development (DSWD) was met with more positive responses on Wednesday, including from erstwhile secretary, ... [3054 chars]",
      url: "https://newsinfo.inquirer.net/1724046/gatchalians-appointment-as-dswd-chief-welcomed-by-tulfo-house-reps",
      image:
        "https://newsinfo.inquirer.net/files/2021/04/Screen-Shot-2021-04-29-at-8.40.53-PM-620x390.png",
      publishedAt: "2023-02-01T10:03:00Z",
      source: {
        name: "INQUIRER.net",
        url: "https://newsinfo.inquirer.net",
      },
    },
    {
      title: "Full SV-splittelse om ny nestleder",
      description:
        "Valgkomiteen i SV er delt på midten i spørsmålet om Lars Haltbrekken eller Marian Hussein bør bli ny nestleder i partiet.",
      content:
        "I dag legger valgkomiteen fram sin innstilling. Dette er de viktigste konklusjonene:\nFire av valgkomiteens medlemmer vil ha den mangeårige lederen av Naturvernforbundet, Lars Haltbrekken, som ny nestleder.\nMen tre medlemmer vil ha Marian Hussein fra ... [6105 chars]",
      url: "https://www.nrk.no/norge/full-sv-splittelse-om-ny-nestleder-1.16279513",
      image:
        "https://gfx.nrk.no/3TgMADq7aDDFLCQG2lUbpwII7VALrQGXi6ZA9ADDVyXg.jpg",
      publishedAt: "2023-02-01T10:00:01Z",
      source: {
        name: "NRK",
        url: "https://www.nrk.no",
      },
    },
    {
      title: "שאלות שכל אישה בגיל המעבר חייבת לשאול את הרופאה שלה",
      description:
        '"אם את רוצה גינה פורחת, תשקי את העציצים", אומרת ד"ר רותי וייזל באר, רופאה מומחית לגיל המעבר, ומתכוונת לטיפול הורמונלי באסטרוגן, שלדבריה יכול למנוע לא מעט דלקות ובעיות נוספות בגיל המעבר. על נשים ש"מגיעות" לגיל המעבר כבר בגיל צעיר, התסמינים הקשים שפולשים לחיים עם הגיל, הדרכים השונות לפתור את התופעות שמתלוות אליהם והסיכונים של מי שבוחרת לעבור את הכול בלי טיפול כלל. פרק שלישי בסדרה',
      content:
        'איך להתמודד בצורה נכונה ויעילה עם תסמיני גיל המעבר? בפרק הקודם , ד"ר נועה חובב פירטה על השימוש בהורמונים מסוגים שונים כטיפול מפחית תסמינים ומונע מחלות כרוניות בגיל המעבר. השבוע אני משוחחת עם ד"ר רותי וייזל באר (56), מומחית למיילדות וגינקולוגיה בסורוק... [8828 chars]',
      url: "https://www.ynet.co.il/health/article/hk8cfhu3s",
      image:
        "https://ynet-pic1.yit.co.il/picserver5/crop_images/2021/08/01/10858001/10858001_0_102_981_552_0_large.jpg",
      publishedAt: "2023-02-01T09:56:08Z",
      source: {
        name: "ynet ידיעות אחרונות",
        url: "https://www.ynet.co.il",
      },
    },
    {
      title: "टैक्स नियमों में बदलाव, हर महीने ऐसे बचाएं हजारों की रकम",
      description:
        "Union Budget 2023 : यदि आप इंडियन टैक्सपेयर हैं और तो आपके लिए यह समझना काफी जरूरी है कि ये बदलाव आपको और आपकी जेब को कैसे प्रभावित करेंगे. सही टैक्स प्लानिंग के साथ, आप अपनी टैक्स देनदारी को कम कर सकते हैं और अपनी सेविंग्स को बढ़ा सकते हैं.",
      content:
        "Union Budget 2023 : यदि आप इंडियन टैक्सपेयर हैं और तो आपके लिए यह समझना काफी जरूरी है कि ये बदलाव आपको और आपकी जेब को कैसे प्रभावित करेंगे. सही टैक्स प्लानिंग के साथ, आप अपनी टैक्स देनदारी को कम कर सकते हैं और अपनी सेविंग्स को बढ़ा सकते हैं.\nBudget 2... [2366 chars]",
      url: "https://www.tv9hindi.com/budget/budget-2023-tax-planning-guide-maximize-your-savings-see-details-au564-1694327.html",
      image:
        "https://images.tv9hindi.com/wp-content/uploads/2022/12/Tax-Saving.jpg",
      publishedAt: "2023-02-01T09:55:55Z",
      source: {
        name: "TV9 Bharatvarsh",
        url: "https://www.tv9hindi.com",
      },
    },
    {
      title: "Alec Baldwin siktet for uaktsomt drap: Nye detaljer",
      description: "Tirsdag ble Alec Baldwin siktet for uaktsomt drap.",
      content:
        "Tirsdag ble skuespiller Alec Baldwin (64) offisielt siktet for uaktsomt drap.\nDet meldte blant annet CNN.\nUnder innspillingen av westernfilmen «Rust» i 2021, fyrte Baldwin av en pistol som viste seg å være ladd. Kula traff filmfotograf Halyna Hutchin... [1705 chars]",
      url: "https://www.dagbladet.no/kjendis/nye-detaljerom-siktelsen/78371830",
      image:
        "https://www.dagbladet.no/images/78372316.jpg?imageId=78372316&panow=99.842766981132&panoh=49.099098648649&panox=0&panoy=32.432432432432&heightw=43.03599342723&heighth=99.77628590604&heightx=18.779342723005&heighty=0.22371409395974&width=1200&height=630",
      publishedAt: "2023-02-01T09:48:02Z",
      source: {
        name: "Dagbladet.no",
        url: "https://www.dagbladet.no",
      },
    },
    {
      title: '"מחט בערמת שחת": אוסטרליה מצאה קפסולה רדיואקטיבית בגודל של אפונה',
      description:
        'בתום מבצע חיפושים נרחב אותרה במדבר של מערב אוסטרליה הקפסולה הזעירה ובעלת הפוטנציאל הקטלני. היא נפלה ממשאית שנסעה על כביש באורך של 1,400 ק"מ, כוחות החירום מצאו אותה בצד עם גלאי קרינה: "אתגר אדיר"',
      content:
        "הרשויות ב אוסטרליה הודיעו הבוקר (יום ד') כי בתום מבצע חיפושים נרחב הן איתרו את הקפסולה הרדיואקטיבית הזעירה – בגודל של גרגר אפונה – שנפלה ממשאית במהלך העברתה ממכרה במערב המדינה. כוחות החירום האוסטרליים חיפשו אחר הקפסולה במשך שישה ימים רצופים על פני הכ... [2279 chars]",
      url: "https://www.ynet.co.il/news/article/r1s0khv3s",
      image:
        "https://ynet-pic1.yit.co.il/picserver5/crop_images/2023/02/01/BJFERswns/BJFERswns_0_178_2796_1575_0_large.jpg",
      publishedAt: "2023-02-01T09:40:11Z",
      source: {
        name: "ynet ידיעות אחרונות",
        url: "https://www.ynet.co.il",
      },
    },
    {
      title: "Ibrahim Sadiqs övergång sprack",
      description:
        "Ibrahim Sadiq var på plats för att skriva på för Saint-Étienne – nu återvänder han till BK Häckens läger i Marbella.",
      content:
        "När de regerande mästarna tränade i Marbella på tisdagsförmiddagen saknades en spelare, nämligen anfallaren Ibrahim Sadiq, 22.\nUnder det internationella transferfönstrets sista, skälvande timmar hade han åkt till Frankrike för att i all hast skriva p... [2654 chars]",
      url: "https://www.gp.se/sport/fotboll/d%C3%A4rf%C3%B6r-sprack-bk-h%C3%A4ckens-storf%C3%B6rs%C3%A4ljning-1.91159403",
      image:
        "https://www.gp.se/image/policy:1.91217562:1675246105/image.jpg?f=Wide%26w=1200%26%24p%24f%24w=834285a",
      publishedAt: "2023-02-01T09:37:20Z",
      source: {
        name: "Göteborgs-Posten",
        url: "https://www.gp.se",
      },
    },
    {
      title:
        "Ukraine-Krieg: Scholz erhält Munitions-Absage von Brasiliens Präsident Lula",
      description:
        "Brasilien wird der Ukraine keine Munition zur Verfügung stellen. Die Lage an der Front ist hart, Kiew gibt sich zuversichtlich. Die News im Überblick.",
      content:
        "Die Nacht im Überblick Bei Lula kommt der Kanzler mit einer Bitte nicht weiter Von dpa , Reuters , aj Aktualisiert am 01.02.2023 - 10:37 Uhr Lesedauer: 4 Min. Bundeskanzler Olaf Scholz (l.) umarmt Brasiliens Präsidenten Luiz Inácio Lula da Silva: Mit... [4314 chars]",
      url: "https://www.t-online.de/nachrichten/ukraine/id_100120862/ukraine-krieg-scholz-erhaelt-munitions-absage-von-brasiliens-praesident-lula-.html",
      image:
        "https://images.t-online.de/2023/01/TmsJV3BXZvcT/0x107:2048x1152/fit-in/1800x0/bundeskanzler-olaf-scholz-l-umarmt-brasiliens-praesident-luiz-inacio-lula-da-silva.jpg",
      publishedAt: "2023-02-01T09:37:00Z",
      source: {
        name: "t-online",
        url: "https://www.t-online.de",
      },
    },
  ],
};

let randoms = [];

function fetchNews() {
  // category = "breaking-news";
  // apiKey = "70b17301f3accdd697ee1a6d4ec43e1b";
  // url = `https://gnews.io/api/v4/top-headlines?topic=${category}&token=${apiKey}&lang=en&max=10`;
  // fetch(url)
  //   .then(function (response) {
  //     return response.json();
  //   })
  //   .then(function (result) {
  // }
  let result = localResult;
  randoms = [];
  clearPreviousSearch();

  createTwoCardArticles(result);
  createTwoCardArticles(result);
  createTwoCardArticles(result);
  createTwoCardArticles(result);
  //     });
}
const clearPreviousSearch = function () {
  document.querySelector(".cards").innerHTML = "";
};

const createTwoCardArticles = function (result) {
  const cardOne = displayNews(result);
  const cardTwo = displayNews(result);
  const cardsContainer = document.createElement("div");
  cardsContainer.classList.add("cardsContainer");

  cardsContainer.appendChild(cardOne);
  cardsContainer.appendChild(cardTwo);

  document.querySelector(".cards").appendChild(cardsContainer);
};

let randomNumber = (min, max) => {
  return Math.floor(Math.random() * (max - min) + min);
};

function displayNews(result) {
  let randomIndex = 0;
  console.log("articles: " + result.articles.length);

  do {
    randomIndex = randomNumber(0, result.articles.length);
  } while (randoms.includes(randomIndex));
  randoms.push(randomIndex);
  console.log("randoms: " + randoms);

  const { name } = result.articles[randomIndex].source;
  const { title } = result.articles[randomIndex];
  const { url } = result.articles[randomIndex];
  const { image } = result.articles[randomIndex];
  const { publishedAt } = result.articles[randomIndex];
  console.log(name, title, image, url, publishedAt);

  const card = document.createElement("div");
  card.classList.add("card");

  const articles = document.createElement("div");
  articles.classList.add("articles");

  const pic = document.createElement("div");
  pic.classList.add("pic");

  const img = document.createElement("img");
  img.classList.add("images");
  img.src = image;

  const nameTag = document.createElement("h2");
  nameTag.classList.add("name");
  nameTag.appendChild(document.createTextNode(name));

  const titleTag = document.createElement("h3");
  titleTag.classList.add("title");
  titleTag.appendChild(document.createTextNode(title));

  const urlTag = document.createElement("p");
  urlTag.classList.add("url");

  const ahref = document.createElement("a");
  ahref.appendChild(document.createTextNode(url));
  ahref.classList.add("links");
  ahref.href = url;

  const publishedAtTag = document.createElement("p");
  publishedAtTag.classList.add("publishedAt");
  publishedAtTag.appendChild(document.createTextNode(publishedAt));

  pic.appendChild(img);
  urlTag.appendChild(ahref);
  articles.appendChild(pic);
  articles.appendChild(nameTag);
  articles.appendChild(titleTag);
  articles.appendChild(urlTag);
  articles.appendChild(publishedAtTag);
  card.appendChild(articles);

  return card;
}

function search() {
  fetchNews(document.querySelector(".search-button").value);
}
document.querySelector(".search-button").addEventListener("click", function () {
  search();
});
